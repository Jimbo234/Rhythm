function init(){
  canvas = document.getElementById("game");
  ctx = canvas.getContext("2d");
  
  window.addEventListener("resize", resize_game);
  init_images();
  init_inputs();
  
  started = false;
  
  frame = 0;
  
  startTime = performance.now();
  FPSNormal = 0;
  
  FPS = 60;
  BPM = 170;
  
  firstStart = false;
  
    
  chart = [3, 270, 2, 274, 1, 278, 0, 288, 3, 426, 2, 426, 1, 438, 0, 438, 2, 446, 3, 448, 1, 454, 0, 454, 2, 458, 3, 458, 2, 612, 1, 634, 0, 806, 2, 806, 1, 824, 2, 824, 3, 830, 3, 844, 0, 846, 2, 866, 1, 868, 0, 886, 3, 886, 1, 906, 2, 908, 0, 928, 3, 928, 1, 946, 2, 948, 3, 962, 2, 972, 3, 976, 2, 992, 2, 1014, 2, 1036, 1, 1036, 2, 1056, 1, 1056, 1, 1076, 2, 1078, 2, 1096, 1, 1098, 1, 1120, 2, 1120, 0, 1138, 3, 1140, 1, 1160, 2, 1160, 0, 1180, 3, 1182, 1, 1202, 2, 1202, 3, 1224, 0, 1226, 1, 1246, 2, 1246, 3, 1266, 0, 1266, 1, 1286, 2, 1288, 0, 1310, 3, 1310, 1, 1330, 2, 1332, 3, 1352, 0, 1352, 1, 1362, 2, 1364, 0, 1372, 3, 1372, 1, 1384, 2, 1384, 0, 1392, 3, 1394, 0, 1480, 1, 1488, 3, 1494, 2, 1506, 3, 1516, 0, 1524, 2, 1524, 1, 1528, 3, 1530, 2, 1536, 0, 1536, 3, 1560, 0, 1562, 1, 1566, 2, 1566, 3, 1570, 0, 1574, 2, 1588, 1, 1592, 0, 1606, 3, 1610, 1, 1618, 2, 1618, 3, 1622, 0, 1624, 2, 1646, 1, 1648, 2, 1662, 0, 1666, 2, 1690, 1, 1690, 0, 1696, 3, 1698, 1, 1704, 2, 1706, 0, 1710, 3, 1710, 3, 1732, 1, 1732, 3, 1750, 0, 1752, 3, 1776, 1, 1776, 2, 1782, 0, 1782, 3, 1788, 1, 1788, 2, 1792, 0, 1794, 3, 1798, 1, 1798, 2, 1820, 0, 1820, 1, 1838, 2, 1840, 0, 1860, 3, 1862, 1, 1866, 2, 1868, 0, 1872, 3, 1874, 1, 1876, 2, 1878, 0, 1882, 2, 1906, 0, 1908, 1, 1926, 2, 1928, 2, 1946, 1, 1950, 2, 1956, 2, 1962, 1, 1964, 0, 1988, 3, 1992, 1, 2008, 3, 2008, 3, 2028, 3, 2036, 0, 2038, 3, 2044, 1, 2050, 3, 2072, 0, 2074, 1, 2092, 3, 2092, 0, 2112, 2, 2114, 1, 2118, 3, 2122, 0, 2124, 1, 2128, 2, 2128, 3, 2132, 0, 2134, 2, 2138, 1, 2138, 3, 2140, 0, 2158, 2, 2158, 1, 2178, 2, 2178, 3, 2198, 0, 2200, 1, 2208, 2, 2210, 3, 2212, 0, 2214, 1, 2218, 2, 2218, 3, 2222, 3, 2242, 3, 2264, 2, 2288, 1, 2290, 0, 2294, 2, 2298, 1, 2302, 0, 2306, 2, 2308, 1, 2312, 0, 2316, 0, 2330, 0, 2346, 0, 2364, 1, 2368, 2, 2370, 0, 2374, 2, 2378, 1, 2378, 0, 2384, 2, 2386, 1, 2386, 0, 2392, 2, 2394, 1, 2396, 3, 2412, 3, 2432, 3, 2450, 2, 2454, 3, 2458, 2, 2464, 3, 2468, 2, 2472, 3, 2474, 0, 2496, 1, 2516, 0, 2536, 1, 2540, 0, 2548, 1, 2552, 0, 2556, 1, 2560, 2, 2580, 3, 2600, 2, 2622, 3, 2624, 2, 2630, 3, 2634, 2, 2640, 3, 2642, 0, 2664, 1, 2682, 0, 2704, 1, 2708, 0, 2714, 1, 2718, 0, 2724, 1, 2726, 3, 2748, 0, 2748, 1, 2770, 2, 2772, 0, 2792, 3, 2792, 1, 2796, 2, 2796, 0, 2800, 3, 2800, 1, 2806, 2, 2806, 3, 2808, 0, 2810, 2, 2814, 1, 2814, 1, 2836, 2, 2836, 1, 2930, 2, 2940, 0, 2950, 2, 2962, 1, 2972, 3, 2984, 0, 2996, 3, 3006, 1, 3018, 2, 3028, 0, 3038, 2, 3050, 1, 3060, 3, 3070, 0, 3082, 3, 3090, 1, 3102, 3, 3110, 3, 3132, 3, 3150, 3, 3170, 2, 3192, 1, 3212, 0, 3236, 1, 3256, 2, 3276, 3, 3298, 2, 3320, 1, 3340, 0, 3362, 1, 3382, 2, 3402, 3, 3422, 2, 3444, 0, 3468, 2, 3470, 3, 3480, 1, 3480, 2, 3502, 0, 3504, 3, 3516, 1, 3520, 2, 3530, 0, 3532, 2, 3542, 3, 3542, 1, 3542, 2, 3554, 3, 3562, 0, 3574, 2, 3574, 3, 3586, 2, 3596, 0, 3606, 2, 3616, 1, 3628, 2, 3638, 0, 3648, 3, 3656, 1, 3668, 2, 3680, 0, 3690, 2, 3700, 1, 3712, 2, 3722, 0, 3732, 3, 3742, 1, 3754, 2, 3766, 0, 3776, 2, 3786, 1, 3796, 3, 3804, 0, 3816, 3, 3826, 1, 3836, 3, 3848, 0, 3860, 2, 3870, 1, 3880, 2, 3892, 0, 3900, 2, 3912, 1, 3922, 3, 3934, 0, 3944, 3, 3956, 1, 3964, 2, 3978, 0, 3988, 2, 3998, 1, 4008, 3, 4020, 0, 4030, 2, 4040, 1, 4050, 2, 4062, 0, 4072, 2, 4082, 1, 4090, 0, 4104, 1, 4114, 2, 4124, 3, 4138, 2, 4150, 2, 4162, 1, 4172, 0, 4186, 2, 4198, 1, 4208, 3, 4216, 0, 4230, 2, 4244, 1, 4254, 2, 4264, 0, 4272, 2, 4282, 1, 4294, 3, 4304, 0, 4314, 3, 4326, 1, 4334, 3, 4344, 0, 4356, 2, 4366, 1, 4376, 2, 4388, 0, 4400, 2, 4408, 1, 4420, 3, 4430, 0, 4442, 3, 4452, 1, 4462, 3, 4474, 0, 4484, 2, 4494, 1, 4506, 2, 4514, 0, 4526, 3, 4538, 1, 4548, 3, 4558, 3, 4574, 3, 4584, 3, 4594, 3, 4606, 2, 4620, 1, 4634, 2, 4644, 0, 4656, 3, 4664, 1, 4676, 3, 4686, 0, 4698, 2, 4708, 1, 4718, 3, 4730, 0, 4740, 3, 4748, 1, 4760, 3, 4770, 0, 4782, 2, 4790, 1, 4800, 3, 4810, 0, 4820, 2, 4830, 3, 4842, 1, 4866, 2, 4868, 3, 4886, 0, 4908, 3, 4910, 3, 4930, 3, 4952, 1, 4954, 3, 4972, 0, 4994, 3, 4996, 2, 5006, 3, 5012, 2, 5020, 1, 5026, 2, 5050, 0, 5060, 1, 5082, 0, 5100, 1, 5120, 0, 5158, 2, 5160, 3, 5178, 1, 5202, 2, 5202, 2, 5224, 2, 5244, 0, 5266, 3, 5268, 2, 5280, 2, 5294, 2, 5314, 1, 5334, 3, 5344, 2, 5354, 0, 5364, 1, 5394, 0, 5414, 1, 5436, 0, 5458, 1, 5480, 0, 5498, 1, 5520, 2, 5520, 0, 5542, 3, 5544, 3, 5564, 3, 5584, 1, 5586, 0, 5606, 3, 5606, 3, 5628, 1, 5628, 0, 5650, 3, 5650, 1, 5672, 2, 5674, 3, 5682, 2, 5688, 0, 5694, 2, 5704, 1, 5716, 2, 5726, 0, 5736, 3, 5756, 1, 5756, 0, 5776, 3, 5776, 3, 5796, 1, 5796, 0, 5818, 3, 5820, 1, 5840, 2, 5842, 0, 5862, 2, 5862, 1, 5882, 3, 5882, 0, 5902, 3, 5904, 1, 5924, 3, 5924, 0, 5944, 2, 5946, 2, 5958, 1, 5966, 2, 5986, 0, 6006, 3, 6008, 2, 6020, 3, 6030, 1, 6032, 2, 6040, 0, 6052, 2, 6070, 2, 6092, 1, 6094, 2, 6114, 0, 6114, 3, 6134, 1, 6134, 2, 6154, 0, 6156, 1, 6176, 3, 6176, 2, 6196, 0, 6200, 3, 6204, 2, 6222, 0, 6224, 3, 6224, 1, 6242, 3, 6242, 2, 6264, 0, 6264, 1, 6284, 3, 6286, 0, 6304, 2, 6306, 3, 6324, 1, 6324, 0, 6348, 2, 6350, 3, 6366, 1, 6368, 0, 6390, 2, 6390, 3, 6412, 1, 6412, 0, 6432, 2, 6432, 1, 6454, 3, 6454, 0, 6472, 2, 6474, 1, 6494, 3, 6496, 0, 6514, 3, 6514, 0, 6538, 1, 6538, 3, 6538, 2, 6538, 0, 6560, 3, 6560, 1, 6580, 2, 6580, 0, 6602, 3, 6602, 2, 6618, 1, 6620, 3, 6642, 0, 6642, 1, 6664, 3, 6664, 0, 6686, 2, 6686, 3, 6696, 1, 6698, 2, 6706, 0, 6706, 1, 6730, 3, 6730, 2, 6748, 0, 6750, 1, 6770, 2, 6772, 2, 6782, 2, 6792, 2, 6802, 1, 6810, 2, 6810, 3, 6812, 3, 6830, 0, 6832, 3, 6840, 1, 6846, 3, 6848, 2, 6856, 0, 6858, 2, 6864, 1, 6864, 2, 6870, 0, 6872, 1, 6878, 2, 6878, 2, 6884, 2, 6894, 2, 6902, 2, 6910, 2, 6916, 2, 6924, 2, 6930, 1, 6938, 1, 6946, 1, 6950, 1, 6958, 1, 6964, 1, 6970, 0, 6978, 0, 6988, 0, 6996, 0, 7004, 0, 7010, 0, 7018, 1, 7026, 2, 7030, 1, 7036, 1, 7042, 1, 7050, 1, 7060, 3, 7066, 1, 7068, 3, 7072, 1, 7076, 3, 7080, 1, 7082, 3, 7086, 1, 7090, 3, 7094, 1, 7096, 3, 7102, 0, 7110, 2, 7112, 0, 7118, 2, 7120, 0, 7126, 2, 7128, 0, 7136, 2, 7136, 0, 7142, 2, 7142, 1, 7154, 1, 7160, 1, 7170, 1, 7178, 1, 7186, 3, 7194, 3, 7202, 3, 7208, 3, 7218, 3, 7226, 2, 7236, 2, 7246, 2, 7256, 1, 7262, 1, 7270, 1, 7278, 0, 7282, 0, 7292, 0, 7300, 1, 7306, 1, 7314, 1, 7322, 2, 7328, 2, 7336, 3, 7346, 3, 7354, 3, 7362, 3, 7370, 3, 7380, 3, 7390, 3, 7400, 0, 7402, 2, 7404, 1, 7404, 3, 7410, 0, 7412, 2, 7416, 1, 7418, 3, 7420, 0, 7422, 2, 7424, 1, 7426, 3, 7426, 2, 7432, 0, 7436, 3, 7436, 1, 7440, 2, 7440, 3, 7444, 0, 7446, 2, 7448, 1, 7450, 3, 7452, 0, 7454, 2, 7458, 1, 7460, 3, 7462, 0, 7464, 2, 7466, 1, 7468, 3, 7470, 0, 7474, 2, 7476, 1, 7478, 3, 7478, 2, 7482, 3, 7486, 0, 7566, 2, 7570, 1, 7570, 3, 7572, 3, 7592, 0, 7592, 3, 7614, 1, 7614, 0, 7618, 2, 7620, 1, 7622, 3, 7624, 0, 7628, 2, 7628, 3, 7632, 1, 7634, 2, 7634, 3, 7640, 0, 7654, 1, 7656, 2, 7656, 0, 7662, 3, 7664, 1, 7666, 2, 7668, 3, 7672, 2, 7676, 1, 7682, 2, 7694, 0, 7696, 1, 7702, 3, 7704, 2, 7706, 0, 7708, 3, 7712, 1, 7714, 2, 7718, 2, 7724, 2, 7732, 2, 7740, 1, 7744, 2, 7748, 0, 7752, 3, 7760, 1, 7762, 2, 7766, 0, 7770, 3, 7770, 1, 7774, 2, 7776, 3, 7780, 0, 7780, 2, 7790, 1, 7790, 0, 7794, 3, 7796, 2, 7800, 1, 7802, 3, 7806, 0, 7808, 1, 7810, 0, 7816, 0, 7824, 1, 7830, 0, 7834, 1, 7840, 0, 7846, 1, 7850, 0, 7854, 3, 7856, 1, 7860, 2, 7862, 3, 7866, 2, 7870, 3, 7874, 2, 7878, 3, 7882, 2, 7888, 3, 7892, 2, 7896, 0, 7898, 3, 7900, 1, 7904, 3, 7916, 0, 7916, 1, 7922, 2, 7922, 2, 7928, 0, 7930, 3, 7932, 1, 7934, 2, 7938, 0, 7940, 2, 7942, 1, 7946, 3, 7956, 0, 7958, 2, 7960, 1, 7962, 3, 7964, 0, 7968, 2, 7968, 1, 7972, 3, 7974, 2, 7978, 0, 7996, 3, 7996, 3, 8004, 1, 8004, 3, 8012, 1, 8014, 0, 8020, 3, 8020, 1, 8026, 2, 8032, 0, 8034, 3, 8036, 1, 8040, 2, 8042, 3, 8044, 0, 8046, 2, 8052, 1, 8052, 0, 8054, 2, 8058, 0, 8064, 2, 8068, 0, 8072, 2, 8076, 1, 8082, 3, 8082, 0, 8086, 2, 8086, 3, 8090, 1, 8092, 2, 8094, 0, 8098, 3, 8100, 2, 8104, 1, 8104, 3, 8108, 1, 8110, 3, 8124, 3, 8132, 3, 8142, 3, 8152, 2, 8154, 2, 8164, 0, 8168, 3, 8170, 1, 8172, 2, 8176, 0, 8178, 3, 8180, 1, 8182, 2, 8186, 0, 8188, 3, 8192, 2, 8194, 1, 8200, 2, 8202, 0, 8206, 2, 8212, 1, 8212, 3, 8212, 0, 8218, 0, 8228, 2, 8230, 2, 8238, 0, 8238, 0, 8248, 2, 8248, 1, 8254, 2, 8258, 3, 8260, 3, 8274, 1, 8276, 0, 8294, 3, 8294, 1, 8300, 2, 8300, 3, 8304, 0, 8306, 2, 8310, 1, 8310, 3, 8314, 0, 8316, 0, 8332, 3, 8332, 1, 8336, 2, 8338, 0, 8340, 3, 8342, 1, 8344, 2, 8346, 0, 8350, 3, 8352, 2, 8356, 1, 8356, 3, 8360, 1, 8360, 0, 8374, 1, 8378, 3, 8378, 1, 8384, 3, 8386, 2, 8390, 0, 8392, 3, 8394, 0, 8398, 1, 8398, 3, 8402, 1, 8404, 0, 8404, 2, 8406, 3, 8410, 1, 8412, 0, 8412, 2, 8424, 0, 8424, 0, 8436, 3, 8438, 1, 8444, 2, 8444, 0, 8448, 3, 8450, 1, 8454, 2, 8456, 3, 8458, 0, 8458, 3, 8470, 1, 8470, 2, 8474, 3, 8478, 1, 8482, 2, 8482, 3, 8486, 2, 8490, 3, 8504, 2, 8508, 0, 8508, 1, 8512, 3, 8514, 2, 8520, 0, 8520, 1, 8522, 0, 8528, 1, 8532, 0, 8538, 1, 8544, 0, 8550, 3, 8550, 2, 8556, 3, 8562, 3, 8570, 2, 8572, 3, 8578, 0, 8594, 3, 8596, 3, 8614, 1, 8614, 0, 8634, 2, 8634, 3, 8638, 1, 8638, 2, 8642, 0, 8644, 3, 8646, 1, 8648, 2, 8652, 0, 8654, 0, 8672, 2, 8674, 1, 8678, 2, 8682, 0, 8682, 1, 8688, 2, 8692, 0, 8696, 3, 8702, 2, 8708, 2, 8716, 3, 8720, 0, 8726, 2, 8726, 1, 8728, 2, 8736, 0, 8736, 1, 8740, 2, 8742, 0, 8748, 3, 8748, 1, 8750, 2, 8752, 3, 8766, 0, 8766, 2, 8772, 3, 8778, 3, 8784, 2, 8784, 1, 8788, 3, 8806, 3, 8814, 0, 8814, 3, 8824, 1, 8828, 3, 8832, 3, 8848, 0, 8850, 3, 8858, 1, 8862, 2, 8862, 3, 8868, 0, 8874, 2, 8876, 1, 8880, 3, 8880, 2, 8886, 0, 8886, 3, 8888, 1, 8890, 2, 8894, 0, 8928, 1, 8932, 2, 8936, 3, 8938, 2, 8948, 3, 8954, 2, 8960, 3, 8964, 0, 8966, 1, 8970, 0, 8976, 1, 8982, 0, 8988, 1, 8992, 0, 9000, 3, 9000, 2, 9004, 3, 9010, 2, 9012, 3, 9018, 2, 9022, 1, 9024, 3, 9024, 0, 9028, 1, 9034, 3, 9038, 3, 9046, 1, 9052, 3, 9056, 0, 9060, 2, 9062, 1, 9066, 3, 9070, 2, 9076, 0, 9076, 1, 9082, 0, 9088, 2, 9090, 1, 9094, 0, 9100, 2, 9100, 0, 9108, 1, 9116, 2, 9116, 0, 9122, 1, 9128, 2, 9130, 0, 9136, 2, 9140, 1, 9140, 3, 9142, 3, 9158, 2, 9164, 3, 9170, 3, 9178, 0, 9178, 1, 9182, 0, 9188, 2, 9192, 1, 9194, 3, 9196, 0, 9200, 2, 9204, 3, 9206, 2, 9212, 3, 9216, 2, 9228, 1, 9230, 2, 9250, 0, 9250, 1, 9270, 3, 9270, 2, 9274, 0, 9274, 3, 9280, 1, 9280, 2, 9290, 0, 9292, 3, 9296, 1, 9298, 2, 9304, 3, 9312, 0, 9314, 2, 9316, 3, 9326, 2, 9334, 3, 9338, 2, 9344, 3, 9348, 0, 9352, 2, 9352, 1, 9356, 3, 9356, 0, 9362, 3, 9366, 1, 9368, 2, 9370, 0, 9376, 1, 9380, 0, 9386, 1, 9392, 2, 9398, 2, 9418, 0, 9418, 3, 9440, 1, 9442, 0, 9444, 2, 9444, 1, 9450, 3, 9450, 2, 9454, 0, 9454, 3, 9458, 2, 9464, 3, 9470, 3, 9482, 0, 9488, 2, 9490, 1, 9494, 3, 9502, 3, 9514, 3, 9524, 0, 9526, 3, 9544, 1, 9548, 2, 9566, 0, 9566, 2, 9588, 1, 9590, 0, 9610, 2, 9610, 3, 9612, 1, 9612, 3, 9620, 0, 9620, 2, 9620, 1, 9626, 3, 9628, 2, 9632, 3, 9638, 2, 9650, 1, 9652, 3, 9654, 2, 9662, 3, 9664, 2, 9670, 0, 9672, 0, 9694, 2, 9696, 1, 9698, 3, 9702, 0, 9704, 2, 9706, 1, 9708, 3, 9710, 0, 9726, 3, 9730, 2, 9740, 0, 9740, 1, 9742, 0, 9748, 2, 9750, 1, 9758, 2, 9760, 0, 9764, 3, 9778, 0, 9780, 2, 9784, 2, 9798, 1, 9800, 0, 9816, 1, 9822, 2, 9822, 0, 9828, 2, 9830, 1, 9832, 3, 9832, 0, 9836, 2, 9838, 3, 9844, 3, 9860, 1, 9866, 3, 9870, 0, 9878, 3, 9878, 2, 9882, 1, 9884, 0, 9890, 2, 9894, 1, 9894, 3, 9898, 2, 9902, 1, 9904, 2, 9910, 0, 9912, 2, 9922, 0, 9928, 2, 9932, 3, 9950, 1, 9950, 0, 9968, 3, 9968, 2, 9986, 1, 9988, 0, 9990, 3, 9992, 1, 9996, 2, 9996, 0, 10000, 3, 10002, 2, 10006, 1, 10006, 2, 10026, 0, 10028, 1, 10034, 2, 10036, 0, 10040, 1, 10044, 2, 10044, 0, 10048, 3, 10050, 1, 10054, 2, 10056, 3, 10060, 0, 10060, 2, 10064, 2, 10078, 0, 10080, 2, 10096, 1, 10096, 0, 10114, 3, 10114, 1, 10118, 2, 10118, 3, 10124, 0, 10126, 2, 10128, 1, 10132, 3, 10134, 1, 10138, 2, 10138, 0, 10140, 2, 10156, 0, 10158, 1, 10162, 2, 10166, 0, 10168, 1, 10172, 2, 10174, 3, 10176, 0, 10178, 2, 10182, 3, 10188, 1, 10188, 3, 10202, 3, 10214, 0, 10214, 1, 10222, 3, 10222, 0, 10226, 3, 10230, 1, 10232, 0, 10238, 3, 10238, 2, 10242, 1, 10246, 3, 10248, 0, 10250, 2, 10252, 1, 10256, 3, 10258, 2, 10260, 1, 10264, 2, 10268, 1, 10282, 2, 10282, 0, 10372, 2, 10380, 1, 10394, 3, 10402, 0, 10416, 3, 10428, 1, 10440, 2, 10450, 0, 10462, 2, 10474, 1, 10484, 3, 10496, 0, 10504, 3, 10516, 1, 10526, 3, 10538, 0, 10550, 3, 10562, 1, 10574, 3, 10586, 0, 10596, 2, 10606, 1, 10616, 2, 10628, 0, 10638, 3, 10648, 1, 10658, 3, 10670, 0, 10680, 2, 10692, 1, 10700, 2, 10714, 0, 10724, 3, 10736, 1, 10742, 0, 10776, 2, 10780, 1, 10796, 3, 10800, 0, 10816, 3, 10818, 1, 10838, 2, 10838, 0, 10858, 2, 10860, 1, 10880, 2, 10882, 0, 10900, 2, 10904, 0, 10924, 2, 10932, 2, 10950, 1, 10952, 2, 10976, 1, 10982, 3, 10988, 1, 11000, 2, 11008, 0, 11020, 2, 11028, 1, 11038, 3, 11048, 0, 11058, 2, 11070, 1, 11080, 2, 11090, 0, 11102, 3, 11112, 1, 11122, 2, 11132, 0, 11144, 3, 11154, 1, 11164, 2, 11176, 0, 11184, 3, 11198, 1, 11204, 3, 11218, 3, 11230, 2, 11240, 1, 11252, 2, 11262, 0, 11270, 2, 11282, 1, 11292, 2, 11304, 0, 11312, 3, 11324, 1, 11336, 2, 11344, 0, 11356, 1, 11366, 1, 11380, 1, 11388, 2, 11394, 0, 11406, 3, 11416, 1, 11428, 2, 11438, 0, 11452, 2, 11462, 1, 11472, 0, 11484, 1, 11496, 2, 11506, 3, 11518, 2, 11528, 2, 11540, 2, 11554, 1, 11562, 3, 11572, 0, 11580, 2, 11594, 1, 11604, 2, 11612, 0, 11622, 3, 11630, 1, 11642, 2, 11650, 0, 11664, 3, 11672, 1, 11686, 2, 11696, 1, 11706, 2, 11712, 3, 11728, 2, 11740, 3, 11750, 2, 11760, 0, 11772, 2, 11782, 1, 11790, 2, 11800, 0, 11812, 3, 11822, 1, 11834, 2, 11844, 0, 11854, 2, 11864, 1, 11876, 2, 11884, 0, 11898, 2, 11908, 1, 11918, 3, 11926, 2, 11940, 3, 11948, 2, 11960, 3, 11966, 0, 11982, 2, 11984, 1, 11996, 3, 11996, 2, 12006, 0, 12006, 3, 12018, 2, 12028, 1, 12042, 2, 12050, 0, 12064, 3, 12072, 1, 12084, 2, 12094, 0, 12108, 3, 12118, 1, 12130, 2, 12142, 0, 12152, 3, 12160, 1, 12172, 3, 12180, 0, 12194, 2, 12200, 1, 12214, 2, 12228, 0, 12238, 3, 12248, 1, 12256, 2, 12266, 3, 12272, 0, 12272, 1, 12280, 2, 12280, 3, 12292, 0, 12292, 0, 12320, 3, 12322, 1, 12342, 2, 12342, 0, 12364, 3, 12364, 1, 12384, 2, 12386, 0, 12406, 3, 12406, 1, 12428, 2, 12428, 0, 12448, 3, 12452, 1, 12456, 2, 12462, 3, 12466, 2, 12474, 0, 12484, 1, 12484, 3, 12488, 1, 12494, 2, 12496, 3, 12502, 0, 12502, 2, 12508, 3, 12522, 0, 12536, 3, 12538, 1, 12556, 2, 12556, 0, 12574, 3, 12574, 1, 12596, 3, 12596, 0, 12618, 3, 12620, 2, 12636, 1, 12638, 0, 12660, 3, 12660, 1, 12666, 2, 12666, 3, 12672, 3, 12700, 2, 12722, 1, 12728, 2, 12732, 0, 12744, 0, 12768, 0, 12788, 2, 12800, 1, 12808, 3, 12820, 3, 12850, 3, 12872, 3, 12894, 3, 12916, 3, 12934, 3, 12954, 0, 12972, 2, 12974, 1, 12996, 3, 12996, 0, 13016, 3, 13018, 1, 13038, 3, 13040, 0, 13058, 3, 13060, 1, 13080, 2, 13082, 0, 13100, 2, 13104, 3, 13126, 1, 13126, 2, 13140, 0, 13142, 3, 13166, 1, 13166, 3, 13186, 1, 13210, 2, 13210, 0, 13232, 2, 13232, 1, 13254, 2, 13254, 3, 13272, 0, 13294, 3, 13296, 1, 13318, 2, 13318, 0, 13336, 3, 13338, 2, 13360, 1, 13360, 3, 13378, 2, 13402, 1, 13402, 2, 13414, 0, 13424, 1, 13444, 0, 13464, 1, 13484, 3, 13484, 2, 13492, 3, 13498, 0, 13500, 2, 13506, 2, 13526, 2, 13546, 1, 13546, 0, 13568, 2, 13568, 2, 13590, 1, 13590, 0, 13632, 3, 13634, 1, 13640, 2, 13640, 0, 13652, 3, 13652, 0, 13674, 2, 13674, 1, 13694, 2, 13694, 3, 13716, 0, 13716, 3, 13726, 2, 13734, 3, 13740, 3, 13752, 0, 13758, 2, 13760, 2, 13780, 1, 13780, 0, 13802, 3, 13802, 2, 13802, 0, 13812, 3, 13812, 3, 13824, 1, 13826, 0, 13844, 2, 13844, 3, 13864, 0, 13864, 1, 13886, 3, 13888, 2, 13896, 0, 13898, 3, 13906, 1, 13908, 2, 13912, 3, 13918, 0, 13930, 1, 13930, 3, 13930, 0, 13950, 3, 13950, 2, 13950, 3, 13972, 1, 13972, 0, 13976, 2, 13984, 0, 13986, 2, 13994, 3, 13994, 0, 13994, 1, 14012, 3, 14014, 0, 14034, 3, 14036, 1, 14054, 3, 14056, 0, 14076, 3, 14078, 1, 14098, 2, 14098, 0, 14118, 2, 14120, 2, 14140, 1, 14140, 0, 14150, 2, 14150, 1, 14160, 2, 14162, 2, 14172, 0, 14172, 3, 14178, 1, 14178, 2, 14184, 0, 14184, 3, 14188, 1, 14190, 2, 14192, 0, 14194, 1, 14200, 2, 14202, 0, 14204, 3, 14204, 1, 14210, 2, 14210, 3, 14214, 0, 14214, 2, 14218, 1, 14218, 3, 14220, 0, 14222, 2, 14226, 1, 14226, 3, 14228, 0, 14232, 2, 14234, 3, 14236, 1, 14238, 0, 14240, 2, 14242, 3, 14246, 1, 14246, 2, 14250, 0, 14250, 3, 14254, 0, 14264, 3, 14264, 0, 14340, 3, 14344, 2, 14366, 1, 14368, 0, 14396, 2, 14396, 0, 14414, 3, 14416, 3, 14438, 0, 14438, 2, 14458, 0, 14458, 3, 14462, 1, 14468, 2, 14468, 3, 14472, 0, 14474, 2, 14478, 3, 14500, 0, 14500, 1, 14506, 2, 14510, 0, 14514, 3, 14514, 3, 14522, 0, 14526, 3, 14542, 1, 14544, 2, 14548, 0, 14550, 3, 14552, 1, 14556, 2, 14558, 0, 14562, 2, 14584, 0, 14584, 1, 14602, 2, 14604, 0, 14624, 3, 14626, 1, 14628, 2, 14632, 0, 14636, 3, 14636, 1, 14642, 2, 14642, 3, 14646, 0, 14648, 0, 14668, 3, 14668, 1, 14672, 2, 14674, 0, 14678, 3, 14678, 1, 14684, 3, 14688, 0, 14688, 2, 14692, 0, 14708, 3, 14710, 1, 14714, 2, 14714, 0, 14718, 3, 14722, 1, 14724, 2, 14724, 0, 14730, 3, 14730, 2, 14734, 3, 14736, 2, 14740, 0, 14744, 3, 14746, 1, 14748, 2, 14750, 0, 14754, 3, 14756, 2, 14758, 0, 14772, 1, 14778, 3, 14778, 2, 14784, 0, 14786, 1, 14792, 2, 14792, 0, 14796, 3, 14796, 1, 14802, 3, 14806, 2, 14808, 0, 14812, 3, 14816, 2, 14818, 1, 14818, 3, 14824, 0, 14826, 2, 14828, 3, 14832, 2, 14836, 0, 14838, 1, 14846, 3, 14848, 0, 14862, 2, 14864, 1, 14866, 0, 14874, 3, 14880, 1, 14884, 0, 14892, 3, 14894, 1, 14900, 2, 14900, 3, 14906, 0, 14906, 0, 14922, 3, 14924, 1, 14928, 2, 14930, 0, 14934, 3, 14936, 1, 14938, 2, 14940, 3, 14944, 0, 14944, 2, 14948, 0, 14960, 2, 14960, 1, 14970, 2, 14970, 0, 14976, 2, 14980, 1, 14982, 0, 14986, 2, 14988, 1, 14992, 3, 14996, 0, 14998, 1, 15002, 2, 15004, 0, 15008, 3, 15012, 1, 15014, 2, 15018, 0, 15020, 3, 15024, 1, 15024, 0, 15032, 3, 15034, 1, 15050, 3, 15050, 2, 15054, 0, 15056, 3, 15060, 1, 15060, 2, 15066, 0, 15066, 3, 15070, 2, 15074, 2, 15090, 0, 15090, 1, 15112, 3, 15112, 0, 15130, 2, 15130, 1, 15134, 2, 15138, 0, 15140, 3, 15142, 1, 15146, 2, 15148, 0, 15152, 3, 15152, 1, 15156, 2, 15156, 2, 15174, 0, 15174, 1, 15194, 3, 15194, 0, 15202, 2, 15202, 1, 15206, 3, 15206, 0, 15212, 2, 15212, 1, 15218, 3, 15218, 2, 15222, 0, 15222, 0, 15240, 2, 15240, 1, 15258, 3, 15260, 0, 15264, 2, 15266, 3, 15276, 1, 15278, 0, 15280, 2, 15288, 0, 15304, 2, 15304, 3, 15310, 1, 15310, 2, 15316, 0, 15318, 3, 15322, 1, 15326, 2, 15326, 0, 15330, 2, 15346, 0, 15346, 1, 15352, 3, 15352, 2, 15358, 0, 15358, 3, 15364, 1, 15364, 2, 15366, 0, 15370, 2, 15388, 0, 15390, 2, 15398, 1, 15398, 0, 15402, 3, 15406, 2, 15414, 1, 15416, 2, 15434, 0, 15434, 1, 15440, 3, 15440, 2, 15444, 0, 15444, 3, 15450, 1, 15450, 2, 15454, 0, 15454, 3, 15472, 2, 15478, 0, 15478, 1, 15482, 3, 15482, 0, 15488, 2, 15488, 3, 15492, 1, 15492, 2, 15496, 0, 15498, 3, 15500, 1, 15510, 0, 15512, 1, 15516, 0, 15522, 1, 15528, 0, 15532, 1, 15536, 3, 15542, 2, 15546, 3, 15554, 2, 15558, 0, 15560, 1, 15564, 2, 15566, 3, 15568, 2, 15574, 0, 15576, 3, 15578, 2, 15582, 3, 15588, 2, 15592, 3, 15596, 2, 15600, 0, 15606, 3, 15606, 2, 15610, 1, 15612, 3, 15616, 0, 15616, 2, 15620, 1, 15620, 3, 15626, 0, 15626, 2, 15630, 1, 15630, 3, 15636, 0, 15636, 2, 15638, 1, 15640, 3, 15644, 2, 15648, 0, 15648, 3, 15652, 1, 15654, 0, 15656, 2, 15656, 3, 15660, 1, 15662, 2, 15666, 0, 15668, 3, 15670, 1, 15672, 2, 15674, 2, 15688, 1, 15688, 0, 15708, 3, 15708, 2, 15732, 1, 15732, 3, 15748, 0, 15750, 2, 15752, 1, 15754, 3, 15758, 0, 15762, 2, 15762, 1, 15766, 3, 15768, 0, 15772, 2, 15772, 3, 15780, 0, 15790, 3, 15790, 1, 15794, 3, 15810, 0, 15810, 2, 15816, 1, 15816, 3, 15822, 0, 15822, 2, 15824, 1, 15826, 3, 15830, 0, 15832, 2, 15834, 0, 15846, 2, 15846, 1, 15852, 2, 15856, 0, 15862, 3, 15868, 1, 15870, 0, 15878, 1, 15884, 0, 15890, 2, 15894, 1, 15896, 0, 15900, 2, 15904, 1, 15906, 0, 15920, 1, 15924, 0, 15938, 1, 15944, 0, 15950, 1, 15958, 0, 15962, 1, 15972, 0, 15974, 3, 15982, 1, 15982, 2, 15984, 0, 15988, 3, 15990, 2, 15996, 3, 16002, 0, 16004, 2, 16006, 3, 16008, 1, 16024, 3, 16024, 0, 16044, 3, 16046, 1, 16050, 2, 16052, 0, 16056, 3, 16058, 1, 16062, 2, 16062, 3, 16066, 0, 16068, 2, 16070, 3, 16076, 2, 16080, 0, 16080, 3, 16086, 2, 16088, 3, 16094, 2, 16110, 1, 16112, 2, 16120, 0, 16122, 3, 16128, 1, 16130, 2, 16130, 3, 16142, 0, 16146, 2, 16154, 1, 16160, 3, 16166, 0, 16174, 2, 16178, 3, 16192, 1, 16192, 2, 16200, 0, 16200, 3, 16204, 2, 16210, 1, 16212, 2, 16222, 0, 16236, 3, 16238, 1, 16246, 2, 16246, 3, 16254, 0, 16256, 2, 16258, 2, 16278, 1, 16280, 3, 16288, 0, 16288, 2, 16294, 1, 16294, 3, 16300, 3, 16318, 0, 16320, 2, 16324, 1, 16324, 3, 16330, 0, 16330, 2, 16334, 1, 16334, 3, 16338, 0, 16342, 2, 16344, 3, 16348, 2, 16352, 3, 16356, 2, 16362, 3, 16364, 0, 16368, 2, 16370, 2, 16386, 0, 16388, 1, 16392, 3, 16404, 0, 16406, 2, 16426, 1, 16426, 0, 16450, 3, 16452, 2, 16472, 1, 16472, 0, 16492, 3, 16492, 2, 16498, 1, 16502, 3, 16504, 0, 16508, 2, 16508, 1, 16514, 3, 16530, 0, 16530, 1, 16534, 2, 16536, 0, 16554, 3, 16556, 1, 16558, 2, 16576, 0, 16576, 3, 16578, 1, 16580, 2, 16584, 0, 16588, 3, 16588, 1, 16592, 2, 16592, 2, 16614, 1, 16616, 0, 16638, 3, 16638, 2, 16660, 1, 16660, 3, 16666, 0, 16666, 2, 16670, 1, 16672, 3, 16674, 0, 16678, 2, 16680, 1, 16684, 3, 16700, 0, 16704, 2, 16724, 1, 16726, 0, 16746, 3, 16746, 1, 16752, 2, 16752, 0, 16758, 3, 16758, 2, 16762, 1, 16762, 2, 16784, 1, 16786, 0, 16806, 3, 16808, 1, 16810, 2, 16810, 0, 16816, 3, 16816, 2, 16834, 1, 16834, 0, 16842, 3, 16842, 2, 16846, 1, 16848, 2, 16854, 3, 16874, 0, 16874, 1, 16880, 2, 16880, 3, 16884, 0, 16886, 2, 16890, 1, 16890, 3, 16894, 0, 16896, 2, 16898, 3, 16902, 0, 16916, 3, 16918, 1, 16922, 2, 16924, 0, 16928, 2, 16934, 3, 16936, 0, 16938, 2, 16942, 0, 16946, 3, 16948, 1, 16950, 2, 16950, 3, 16954, 0, 16956, 1, 16958, 2, 16960, 3, 16964, 1, 16968, 2, 16968, 3, 16972, 1, 16974, 2, 16978, 0, 16980, 3, 16982, 1, 16984, 2, 16986, 0, 16988, 1, 16990, 3, 16990, 2, 16994, 1, 16998, 3, 17000, 2, 17004, 1, 17006, 3, 17008, 2, 17012, 1, 17016, 2, 17022, 1, 17022, 0, 17026, 3, 17026, 0, 17028, 2, 17030, 3, 17036, 2, 17044, 1, 17044, 3, 17044, 0, 17044, 0, 17064, 3, 17064, 1, 17088, 2, 17088, 3, 17098, 2, 17100, 0, 17104, 3, 17106, 1, 17108, 2, 17110, 3, 17126, 0, 17128, 2, 17130, 1, 17132, 2, 17148, 0, 17150, 3, 17150, 1, 17150, 0, 17170, 3, 17172, 2, 17194, 1, 17194, 3, 17200, 0, 17202, 2, 17204, 2, 17216, 1, 17216, 3, 17232, 0, 17232, 3, 17252, 1, 17252, 0, 17274, 3, 17276, 1, 17280, 2, 17280, 3, 17286, 0, 17286, 1, 17290, 2, 17290, 2, 17298, 2, 17318, 0, 17320, 1, 17340, 3, 17340, 0, 17358, 2, 17360, 3, 17364, 1, 17364, 2, 17370, 0, 17370, 3, 17374, 1, 17376, 2, 17380, 0, 17380, 0, 17402, 3, 17404, 1, 17424, 2, 17426, 0, 17444, 3, 17446, 1, 17448, 2, 17450, 0, 17454, 3, 17456, 1, 17458, 2, 17460, 2, 17470, 1, 17472, 0, 17488, 3, 17488, 1, 17508, 2, 17510, 0, 17530, 3, 17532, 1, 17534, 2, 17536, 0, 17542, 3, 17542, 2, 17546, 1, 17548, 1, 17572, 2, 17572, 2, 17596, 0, 17596, 1, 17614, 2, 17616, 0, 17636, 3, 17638, 1, 17658, 2, 17660, 0, 17678, 3, 17678, 1, 17698, 2, 17702, 0, 17718, 3, 17718, 1, 17720, 2, 17722, 3, 17728, 0, 17728, 2, 17744, 0, 17744, 3, 17762, 1, 17762, 0, 17784, 2, 17786, 1, 17806, 3, 17806, 2, 17828, 0, 17828, 1, 17848, 3, 17848, 0, 17868, 2, 17870, 1, 17890, 2, 17890, 0, 17910, 3, 17910, 1, 17930, 2, 17932, 0, 17952, 3, 17952, 1, 17976, 2, 17976, 0, 17996, 3, 17996, 1, 18016, 2, 18018, 0, 18036, 2, 18038, 3, 18060, 1, 18060, 0, 18082, 3, 18082, 1, 18102, 3, 18104, 0, 18124, 2, 18124, 1, 18144, 2, 18146, 0, 18166, 3, 18166, 3, 18186, 1, 18188, 2, 18206, 0, 18206, 3, 18226, 1, 18228, 0, 18248, 2, 18250, 3, 18262, 1, 18262, 2, 18272, 0, 18272, 3, 18284, 1, 18284, 0, 18294, 2, 18296, 1, 18304, 3, 18306, 2, 18316, 1, 18320, 2, 18326, 0, 18328, 3, 18334, 1, 18338, 2, 18338, 2, 18350, 0, 18350, 1, 18356, 3, 18358, 0, 18362, 2, 18364, 1, 18368, 3, 18368, 2, 18372, 0, 18374, 3, 18376, 1, 18380, 2, 18382, 0, 18384, 3, 18386, 2, 18390, 2, 18418, 1, 18418, 0, 18484, 2, 18484, 3, 18506, 1, 18506, 0, 18526, 2, 18526, 1, 18546, 3, 18548, 0, 18566, 3, 18568, 3, 18588, 1, 18608, 2, 18608, 2, 18630, 0, 18632, 1, 18652, 2, 18652, 2, 18672, 0, 18672, 3, 18692, 1, 18694, 0, 18712, 2, 18712, 1, 18730, 2, 18732, 0, 18734, 3, 18734, 1, 18740, 2, 18740, 3, 18746, 0, 18748, 2, 18750, 3, 18774, 2, 18798, 1, 18802, 2, 18822, 0, 18824, 1, 18844, 0, 18866, 3, 18868, 1, 18886, 2, 18886, 1, 18908, 3, 18910, 2, 18928, 0, 18930, 1, 18948, 2, 18950, 0, 18972, 3, 18972, 1, 18990, 2, 18992, 3, 19010, 0, 19010, 1, 19032, 2, 19034, 0, 19052, 3, 19054, 0, 19088, 3, 19088, 1, 19098, 2, 19098, 3, 19118, 0, 19120, 2, 19140, 3, 19158, 1, 19160, 3, 19182, 0, 19182, 1, 19202, 2, 19204, 0, 19224, 3, 19224, 1, 19246, 3, 19246, 0, 19248, 2, 19252, 1, 19256, 3, 19256, 2, 19260, 3, 19284, 1, 19286, 0, 19308, 2, 19310, 1, 19330, 3, 19330, 0, 19350, 3, 19352, 1, 19374, 3, 19374, 0, 19392, 3, 19392, 2, 19410, 3, 19414, 2, 19420, 3, 19424, 2, 19428, 0, 19432, 1, 19456, 0, 19478, 1, 19500, 0, 19520, 1, 19542, 0, 19560, 3, 19560, 1, 19574, 2, 19576, 3, 19580, 0, 19582, 2, 19586, 1, 19590, 3, 19592, 0, 19596, 2, 19596, 3, 19602, 2, 19606, 3, 19624, 1, 19648, 2, 19648, 0, 19666, 3, 19668, 1, 19688, 2, 19690, 0, 19710, 3, 19710, 0, 19754, 2, 19756, 3, 19776, 1, 19776];
  
  resize_game();
}

function start(){
  if (!started){
    
    started = true;
    gamechart = chart.slice();
    
    song.currentTime = 0;
    
    HP = 100;
    
    alive = true;
    beats = 0;
    
    arrow_spacing = 132;
    
    arrow_width = 128;
    arrow_height = 128;
    
    scroll_speed = 25;
    current_time = 0;
    
    hit_precision = 5 - scroll_speed * 0.06;
    if (hit_precision < 1) hit_precision = 1;
    
    hits = 0;
    misses = 0;
    
    combo = 0;
    
    arrow_pulses = [0, 0, 0, 0];
    pulse_size = 0;
    
    pressednotes = "[";
  
    song.play();
    if (!firstStart)setInterval(onframe, 1000/FPS);
    
    firstStart = true;
  }
}

function init_images(){
  arrows = document.getElementById("arrows");
  song = document.getElementById("music");
}

function init_inputs(){
  inputs = [
      up = false,
      down = false,
      left = false,
      right = false,
  ];
  
  document.addEventListener('click', start);
  
  document.addEventListener('keydown', function(event) {
   
    if(event.keyCode == 68) {
      inputs.left = true;
      press_input(0);
    }
    else if(event.keyCode == 75) {
      inputs.right = true;
      press_input(3)
    }
    else if(event.keyCode == 74) {
      inputs.up = true;
      press_input(2)
    }
    else if(event.keyCode == 70) {
      inputs.down = true;
      press_input(1)
    }
  });
  
  document.addEventListener('keyup', function(event) {
     
      if(event.keyCode == 68) {
        inputs.left = false;
      }
      else if(event.keyCode == 75) {
        inputs.right = false;
      }
      else if(event.keyCode == 74) {
        inputs.up = false;
      }
      else if(event.keyCode == 70) {
        inputs.down = false;
      }
  });
}

function resize_game(){
  canvas.width = window.innerWidth;
  canvas.height = window.innerHeight;
}

function onframe(){
  current_time = song.currentTime*60;
  
  if (HP > 100) HP = 100;
  if (HP < 0) die();
  
  accuracy = Math.floor(hits/(hits+misses) * 100);
  
  if(hits+misses === 0) accuracy = 100;
  
  if (arrow_pulses[0] > 0) arrow_pulses[0]--;
  if (arrow_pulses[1] > 0) arrow_pulses[1]--;
  if (arrow_pulses[2] > 0) arrow_pulses[2]--;
  if (arrow_pulses[3] > 0) arrow_pulses[3]--;
  
  if (pulse_size > 0) pulse_size--;
  
  ax = canvas.width/2 - arrow_spacing * 1.5; // AX is the horizontal center of the left arrow
  ay = canvas.height - 80 - arrow_height/2; // AY is the vertical center of all arrows
  
  beats++;
  
  if (beats >= 3600/BPM && alive){
    beat();
    beats = 0;
  }
  
  render();
}

function beat(){
  pulse_size = 10;
}

function die(){
  song.pause();
  started = false;
  alive = false;
}

function render(){
  ctx.shadowBlur=0;
  
  ctx.fillStyle = "#2d2c2e";
  ctx.fillRect(0, 0, canvas.width, canvas.height);
  
  ctx.fillStyle = "#3c3a3d";
  ctx.fillRect(ax - arrow_width/2 - 8, 0, arrow_spacing*3 + arrow_width + 16, canvas.height);
  
 
  ctx.shadowColor="black";
  ctx.shadowBlur=5;
  
  draw_arrows();
  draw_chart();
  draw_debug();
  draw_health();
    
  calculateFPSNormal();
}


function draw_health(){
  ctx.fillStyle = "#000000";
  ctx.fillRect(0, canvas.height-10, canvas.width, 10);
  
  var colorHP = HP * 2.55
  
  ctx.fillStyle = "rgb("+(255 - colorHP)+","+colorHP+ ", 0)";
  ctx.fillRect(0, canvas.height-10, canvas.width * HP/100, 10);
}

function draw_debug(){
  ctx.textAlign = "left";
  ctx.font = "11px Tahoma";
  
   ctx.fillStyle = "white";
  ctx.fillText("FPS: "+Math.round(FPSNormal), 0, 12); 
  ctx.fillText("Window Width: "+canvas.width, 0, 24);
  ctx.fillText("Window Height: "+canvas.height, 0, 36);
  
  ctx.fillText("Arrow Width: "+arrow_width, 0, 60);
  ctx.fillText("Arrow Height: "+arrow_height, 0, 72);
  ctx.fillText("Arrow Spacing: "+arrow_spacing, 0, 84);
  
  ctx.fillText("Scroll Speed: "+scroll_speed, 0, 108);
  
  ctx.fillText("Notes Left: "+gamechart.length/2, 0, 132);
  ctx.fillText("Hits: "+ hits, 0, 144);
  ctx.fillText("Misses: "+ misses, 0, 156);
  
  ctx.fillText("Current Time: "+ song.currentTime, 0, 180);
  
  ctx.fillText("Health: "+ HP + "%", 0, 204);
  ctx.fillText("chartlength: "+ chart.length, 0, 216);
  
  ctx.textAlign = "center";
  ctx.fillText("Accuracy: " + accuracy + "%", canvas.width/2, canvas.height - 20);
  
  ctx.font = "40px Tahoma";
  
  ctx.fillText(combo, canvas.width/2, canvas.height - 40);
  
  
  if (!alive){
    ctx.fillText("You died, click to restart.", canvas.width/2, canvas.height/2)
    ctx.fillText("You made it " + Math.round((song.currentTime/song.duration)*100) + "% into the song.", canvas.width /2, canvas.height/2 + 40)
  }
}

function draw_arrows(){

  for (i = 0; i < 4; i++){
    var sprite_offset = 0;
    var temp_scale = 0;
    if ( i === 0 && inputs.left ||
         i === 1 && inputs.down ||
         i === 2 && inputs.up   ||
         i === 3 && inputs.right){
           
           sprite_offset = 768;
         } 
    
    if (arrow_pulses[i]){
      sprite_offset = 512;
      temp_scale = arrow_pulses[i] * 8;
    }
    var WIDTH = arrow_width + temp_scale + pulse_size // Adds all scales
    var HEIGHT = arrow_height + temp_scale + pulse_size // Adds all scales
    
    var xPOS = ax + (arrow_spacing * i) - (WIDTH/2);
    var yPOS = ay - (HEIGHT/2);

    ctx.drawImage(arrows, i * 256, 768 - sprite_offset, 256, 256, xPOS, yPOS, WIDTH, HEIGHT);
  }
}

function draw_chart(){
  for (i = 0; i <= gamechart.length/2; i++){
    var arrow_n =        gamechart[i*2]; // direction of arrow
    var arrow_position = gamechart[i*2 + 1];
    var arrow_screen = arrow_position * scroll_speed - (scroll_speed * current_time); // position of arrow on screen
    
    if (arrow_position-current_time < hit_precision - 16){
      gamechart.splice(i*2, 2);
      misses++;
      HP -= 24
      combo = 0;
    }; // deletes missed notes
    
    if (arrow_screen + arrow_height > 0){
      
      
      var WIDTH = arrow_width + pulse_size // Adds all scales
      var HEIGHT = arrow_height + pulse_size // Adds all scales
      
      var xPOS = ax + (arrow_spacing * arrow_n) - (WIDTH/2);
      var yPOS = ay - (HEIGHT/2) - arrow_screen;
    
      ctx.drawImage(arrows, arrow_n * 256, 512, 256, 256, xPOS , yPOS, WIDTH, HEIGHT);
    }
  }
}

function press_input(note){
  lowest_note = NaN;
  
  pressednotes = pressednotes + note + ", ";
  pressednotes = pressednotes + Math.round((current_time/2))*2 + ", ";
  
  for (i = 0; i <= gamechart.length/2; i++){
    var arrow_n =        gamechart[i*2]; // direction of arrow
    var arrow_position = gamechart[i*2 + 1]; //position of arrow
    
    if (arrow_n == note && Math.abs(arrow_position-current_time) < hit_precision){
      if (arrow_position < gamechart[lowest_note] || isNaN(lowest_note)) lowest_note = i*2;
    }
  }
  
  if (!isNaN(lowest_note)){
    gamechart.splice(lowest_note, 2);
    hits++;
    HP += 8
    combo++;
    arrow_pulse(note);
  } 
}

function arrow_pulse(note){
  arrow_pulses[note] = 9; //frames
}

// I totally stole this code
function calculateFPSNormal() {

	var t = performance.now();
	var dt = t - startTime;

	// if elapsed time is greater than 1s
	if( dt > 1000 ) {
		// calculate the frames drawn over the period of time
		FPSNormal = frame * 1000 / dt;
		// and restart the values
		frame = 0;
		startTime = t;
	}
	frame++;

}

